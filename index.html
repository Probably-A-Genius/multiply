<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Math Trainer</title>
    <style>
        body {
            background-color: black;
            color: limegreen;
            font-family: monospace;
            text-align: center;
        }
        #problem {
            font-size: 3em;
            margin: 20px 0;
        }
        #answer {
            background: black;
            border: 2px solid limegreen;
            color: limegreen;
            font-size: 2em;
            text-align: center;
            outline: none;
            width: 150px;
            margin: 20px auto;
            display: block;
        }
        #results {
            display: none;
            text-align: left;
            margin: 20px auto;
            width: 50%;
            border: 1px solid limegreen;
            padding: 10px;
        }
    </style>
</head>
<body>
    <h1>Mental Math Trainer</h1>
    <div id="settings">
        <label>Number of Questions: <input type="number" id="numQuestions" value="10"></label>
        <label>Time per Question (seconds): <input type="number" id="timeLimit" value="2"></label>
        <button onclick="startQuiz()">Start</button>
    </div>
    <div id="quiz" style="display:none;">
        <div id="problem"></div>
        <input type="text" id="answer" autocomplete="off" autofocus>
        <div id="timer"></div>
    </div>
    <div id="results"></div>
    <script>
        let problems = [], index = 0, correctAnswers = [], times = [], timer;
        function startQuiz() {
            let numQuestions = document.getElementById("numQuestions").value;
            let timeLimit = document.getElementById("timeLimit").value * 1000;
            problems = [];
            correctAnswers = [];
            times = [];
            index = 0;
            for (let i = 0; i < numQuestions; i++) {
                let a = Math.floor(Math.random() * 90) + 10;
                let b = Math.floor(Math.random() * 90) + 10;
                problems.push({ a, b, answer: a * b });
            }
            document.getElementById("settings").style.display = "none";
            document.getElementById("quiz").style.display = "block";
            nextProblem(timeLimit);
        }
        function nextProblem(timeLimit) {
            if (index >= problems.length) return showResults();
            let problem = problems[index];
            document.getElementById("problem").innerText = `${problem.a} x ${problem.b}`;
            let answerInput = document.getElementById("answer");
            answerInput.value = "";
            answerInput.style.display = "block";
            answerInput.focus();
            let startTime = Date.now();
            timer = setTimeout(() => {
                times.push(timeLimit / 1000);
                correctAnswers.push("Missed");
                index++;
                nextProblem(timeLimit);
            }, timeLimit);
            answerInput.oninput = function() {
                let userAnswer = parseInt(this.value);
                if (userAnswer === problem.answer) {
                    clearTimeout(timer);
                    times.push((Date.now() - startTime) / 1000);
                    correctAnswers.push("Correct");
                    index++;
                    nextProblem(timeLimit);
                }
            };
        }
        function showResults() {
            document.getElementById("quiz").style.display = "none";
            let resultsDiv = document.getElementById("results");
            resultsDiv.innerHTML = "<h2>Results</h2>";
            let totalTime = times.reduce((a, b) => a + b, 0);
            let fastest = Math.min(...times);
            let slowest = Math.max(...times);
            let missed = correctAnswers.filter(ans => ans === "Missed").length;
            resultsDiv.innerHTML += `Total Time: ${totalTime}s<br>Mean Time: ${(totalTime / times.length).toFixed(2)}s<br>`;
            resultsDiv.innerHTML += `Fastest: ${fastest}s<br>Slowest: ${slowest}s<br>Missed: ${missed}<br><br>`;
            resultsDiv.innerHTML += "<h3>Problem Breakdown</h3>";
            for (let i = 0; i < problems.length; i++) {
                resultsDiv.innerHTML += `${problems[i].a} x ${problems[i].b} = ${problems[i].answer} (Time: ${times[i]}s, ${correctAnswers[i]})<br>`;
            }
            resultsDiv.style.display = "block";
            document.getElementById("settings").style.display = "block";
        }
    </script>
</body>
</html>
